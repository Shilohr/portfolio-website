<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .success { color: green; }
        .error { color: red; }
        .loading { color: blue; }
    </style>
</head>
<body>
    <h1>Frontend Test Page</h1>
    
    <div class="test-section">
        <h2>API Tests</h2>
        <div id="api-results">
            <p class="loading">Testing API endpoints...</p>
        </div>
    </div>

    <div class="test-section">
        <h2>File Loading Tests</h2>
        <div id="file-results">
            <p class="loading">Testing file loading...</p>
        </div>
    </div>

    <script>
        // Test API endpoints
        async function testAPI() {
            const results = document.getElementById('api-results');
            let html = '';

            try {
                // Test health endpoint
                const healthResponse = await fetch('/api/health');
                const healthData = await healthResponse.json();
                html += `<p class="success">[SUCCESS] Health endpoint: ${healthData.status}</p>`;
            } catch (error) {
                html += `<p class="error">[ERROR] Health endpoint failed: ${error.message}</p>`;
            }

            try {
                // Test projects endpoint
                const projectsResponse = await fetch('/api/projects');
                const projectsData = await projectsResponse.json();
                html += `<p class="success">[SUCCESS] Projects endpoint: ${projectsData.projects.length} projects loaded</p>`;
            } catch (error) {
                html += `<p class="error">[ERROR] Projects endpoint failed: ${error.message}</p>`;
            }

            try {
                // Test GitHub endpoint
                const githubResponse = await fetch('/api/github/repos');
                const githubData = await githubResponse.json();
                html += `<p class="success">[SUCCESS] GitHub endpoint: ${githubData.repositories.length} repos loaded</p>`;
            } catch (error) {
                html += `<p class="error">[ERROR] GitHub endpoint failed: ${error.message}</p>`;
            }

            results.innerHTML = html;
        }

        // Test file loading
        function testFiles() {
            const results = document.getElementById('file-results');
            let html = '';

            // Test CSS loading
            const cssLink = document.createElement('link');
            cssLink.rel = 'stylesheet';
            cssLink.href = 'style.css';
            cssLink.onload = () => {
                html += '<p class="success">[SUCCESS] CSS file loaded successfully</p>';
                results.innerHTML = html;
            };
            cssLink.onerror = () => {
                html += '<p class="error">[ERROR] CSS file failed to load</p>';
                results.innerHTML = html;
            };
            document.head.appendChild(cssLink);

            // Test JS loading
            const script = document.createElement('script');
            script.src = 'js/script.js';
            script.onload = () => {
                html += '<p class="success">[SUCCESS] Main JavaScript file loaded successfully</p>';
                results.innerHTML = html;
            };
            script.onerror = () => {
                html += '<p class="error">[ERROR] Main JavaScript file failed to load</p>';
                results.innerHTML = html;
            };
            document.head.appendChild(script);
        }

        // Run tests
        testAPI();
        testFiles();

        // Test image loading
        setTimeout(() => {
            const img = new Image();
            img.onload = () => {
                document.getElementById('file-results').innerHTML += '<p class="success">[SUCCESS] Space images load correctly</p>';
            };
            img.onerror = () => {
                document.getElementById('file-results').innerHTML += '<p class="error">[ERROR] Space images failed to load</p>';
            };
            img.src = 'assets/images/weic2208a.jpg';
        }, 1000);
    </script>
</body>
</html>